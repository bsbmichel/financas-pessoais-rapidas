<!-- Card do Angular Material para agrupar o formulário -->
<mat-card>
  <!-- Título do Card -->
  <mat-card-title>Cadastro de Lançamento</mat-card-title>

  <!-- Conteúdo do Card -->
  <mat-card-content>
    <!-- Formulário para cadastro dos lançamentos -->
    <form (ngSubmit)="salvar(formLancamento)" #formLancamento="ngForm">

      <!-- Campo de descrição -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Descrição</mat-label>
        <input matInput type="text" [(ngModel)]="descricao" name="descricao" required />
      </mat-form-field>

      <!-- Campo de valor com máscara -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Valor</mat-label>
        <input matInput type="text"
               [(ngModel)]="valor"
               name="valor"
               required
               mask="separator.2"
               thousandSeparator="."
               decimalMarker=","
               prefix="R$ " />
      </mat-form-field>

      <!-- Campo de tipo (entrada ou saída) -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Tipo</mat-label>
        <mat-select [(ngModel)]="tipo" name="tipo" required>
          <mat-option value="entrada">Entrada</mat-option>
          <mat-option value="saida">Saída</mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Campo de data -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Data</mat-label>
        <input matInput type="date" [(ngModel)]="data" name="data" required />
      </mat-form-field>

      <!-- Botão de salvar -->
      <button mat-raised-button color="primary" type="submit" [disabled]="formLancamento.invalid">
        Salvar
      </button>

      <!-- Botão de limpar -->
      <button mat-raised-button color="warn" type="button" (click)="limparTudo()">
        Limpar Tudo
      </button>

    </form>
  </mat-card-content>
</mat-card>

<!-- Lista dos lançamentos cadastrados -->
<mat-card>
  <mat-card-title>Lista de Lançamentos</mat-card-title>
  <mat-card-content>
    <ul>
      <!-- Percorre os lançamentos e exibe cada item -->
      <li *ngFor="let lanc of getLancamentosFiltrados()">
        {{ lanc.data }} - {{ lanc.descricao }} - R$ {{ lanc.valor }} ({{ lanc.tipo }})
      </li>
    </ul>
  </mat-card-content>
</mat-card>

<!-- Resumo financeiro -->
<mat-card>
  <mat-card-title>Resumo Financeiro</mat-card-title>
  <mat-card-content>
    <p>Entradas: R$ {{ totalEntradas | number:'1.2-2' }}</p>
    <p>Saídas: R$ {{ totalSaidas | number:'1.2-2' }}</p>
    <p>Saldo Final: R$ {{ saldoFinal | number:'1.2-2' }}</p>
  </mat-card-content>
</mat-card>

<!-- Gráfico de pizza com entradas e saídas -->
<app-grafico-resumo [entradas]="totalEntradas" [saidas]="totalSaidas"></app-grafico-resumo>
